<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <title>GeoAR.js demo</title>
        <script src='https://aframe.io/releases/0.9.2/aframe.min.js'></script>
        <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
        <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
        <script>
            THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
        </script>
    </head>
    
    <body style='margin: 0; overflow: hidden;'>
        <a-scene
            vr-mode-ui="enabled: false"
            embedded
            arjs='sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;'>
            <a-entity gltf-model="./assets/dragonite/scene.gltf" rotation="0 180 0" scale="0.01 0.01 0.01" animation-mixer look-at="[gps-camera]"/>
            <a-camera gps-camera rotation-reader></a-camera>
        </a-scene>
    </body>
    <script text="javascript">
        // 取得使用者當前位置
        navigator.geolocation.getCurrentPosition(function(position) {

            // 填入緯度經度
            var longitude = position.coords.longitude;
            var latitude = position.coords.latitude;
            // 設定模型屬性
            document.querySelector('a-entity').setAttribute('gps-entity-place', {
                longitude: longitude,
                latitude: latitude
            });
            console.log("經緯度",longitude, latitude)
        });
        // 獲取相機的位置
        var cameraPosition = new THREE.Vector3();
        var camera = document.querySelector('[gps-camera]');
        camera.components.camera.camera.getWorldPosition(cameraPosition);

        // 設置物體的位置為相機位置，稍微偏移，可以根據實際需求進行微調
        var object = document.querySelector('a-entity');
        object.setAttribute('position', {
            x: cameraPosition.x,
            y: cameraPosition.y,
            z: cameraPosition.z - 2 // 偏移2個單位，可以根據實際需求進行微調
        });
        console.log(object)
    </script>
</html>